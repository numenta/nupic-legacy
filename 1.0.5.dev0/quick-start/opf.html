<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Online Prediction Framework (OPF) &#8212; NuPIC 1.0.5.dev0

 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '1.0.5.dev0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true,
        SOURCELINK_SUFFIX: '.txt'
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Network API" href="network.html" />
    <link rel="prev" title="Quick Start" href="index.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <img alt="../_images/quickstart.png" class="align-right" src="../_images/quickstart.png" />
<div class="section" id="online-prediction-framework-opf">
<h1>Online Prediction Framework (OPF)<a class="headerlink" href="#online-prediction-framework-opf" title="Permalink to this headline">¶</a></h1>
<p>See the <a class="reference external" href="../guides/opf.html">OPF Guide</a> for an overview of this API.</p>
<p>Here is the complete program we are going to use as an example. In sections
below, we&#8217;ll break it down into parts and explain what is happening (without
some of the plumbing details).</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">itertools</span> <span class="k">import</span> <span class="n">islice</span>

<span class="kn">from</span> <span class="nn">nupic.frameworks.opf.model_factory</span> <span class="k">import</span> <span class="n">ModelFactory</span>

<span class="n">_NUM_RECORDS</span> <span class="o">=</span> <span class="mi">3000</span>
<span class="n">_EXAMPLE_DIR</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="vm">__file__</span><span class="p">))</span>
<span class="n">_INPUT_FILE_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_EXAMPLE_DIR</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">,</span> <span class="s2">&quot;data&quot;</span><span class="p">,</span> <span class="s2">&quot;gymdata.csv&quot;</span><span class="p">)</span>
<span class="n">_PARAMS_PATH</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">_EXAMPLE_DIR</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">pardir</span><span class="p">,</span> <span class="s2">&quot;params&quot;</span><span class="p">,</span> <span class="s2">&quot;model.yaml&quot;</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">createModel</span><span class="p">():</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_PARAMS_PATH</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">modelParams</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
  <span class="k">return</span> <span class="n">ModelFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">modelParams</span><span class="p">)</span>



<span class="k">def</span> <span class="nf">runHotgym</span><span class="p">(</span><span class="n">numRecords</span><span class="p">):</span>
  <span class="n">model</span> <span class="o">=</span> <span class="n">createModel</span><span class="p">()</span>
  <span class="n">model</span><span class="o">.</span><span class="n">enableInference</span><span class="p">({</span><span class="s2">&quot;predictedField&quot;</span><span class="p">:</span> <span class="s2">&quot;consumption&quot;</span><span class="p">})</span>
  <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_INPUT_FILE_PATH</span><span class="p">)</span> <span class="k">as</span> <span class="n">fin</span><span class="p">:</span>
    <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">fin</span><span class="p">)</span>
    <span class="n">headers</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
    <span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

    <span class="n">results</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">islice</span><span class="p">(</span><span class="n">reader</span><span class="p">,</span> <span class="n">numRecords</span><span class="p">):</span>
      <span class="n">modelInput</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">record</span><span class="p">))</span>
      <span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;consumption&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;consumption&quot;</span><span class="p">])</span>
      <span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span>
        <span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">],</span> <span class="s2">&quot;%m/</span><span class="si">%d</span><span class="s2">/%y %H:%M&quot;</span><span class="p">)</span>
      <span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">modelInput</span><span class="p">)</span>
      <span class="n">bestPredictions</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">inferences</span><span class="p">[</span><span class="s2">&quot;multiStepBestPredictions&quot;</span><span class="p">]</span>
      <span class="n">allPredictions</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">inferences</span><span class="p">[</span><span class="s2">&quot;multiStepPredictions&quot;</span><span class="p">]</span>
      <span class="n">oneStep</span> <span class="o">=</span> <span class="n">bestPredictions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
      <span class="n">oneStepConfidence</span> <span class="o">=</span> <span class="n">allPredictions</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">oneStep</span><span class="p">]</span>
      <span class="n">fiveStep</span> <span class="o">=</span> <span class="n">bestPredictions</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
      <span class="n">fiveStepConfidence</span> <span class="o">=</span> <span class="n">allPredictions</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="n">fiveStep</span><span class="p">]</span>

      <span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">oneStep</span><span class="p">,</span> <span class="n">oneStepConfidence</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
                <span class="n">fiveStep</span><span class="p">,</span> <span class="n">fiveStepConfidence</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
      <span class="nb">print</span> <span class="s2">&quot;1-step: </span><span class="si">{:16}</span><span class="s2"> (</span><span class="si">{:4.4}</span><span class="s2">%)</span><span class="se">\t</span><span class="s2"> 5-step: </span><span class="si">{:16}</span><span class="s2"> (</span><span class="si">{:4.4}</span><span class="s2">%)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="p">)</span>
      <span class="n">results</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">result</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">results</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">&quot;__main__&quot;</span><span class="p">:</span>
  <span class="n">runHotgym</span><span class="p">(</span><span class="n">_NUM_RECORDS</span><span class="p">)</span>
</pre></div>
</div>
<div class="section" id="model-parameters">
<h2>Model Parameters<a class="headerlink" href="#model-parameters" title="Permalink to this headline">¶</a></h2>
<p>Before you can create an OPF model, you need to have model parameters defined in
a file. These model parameters contain many details about how the HTM
network will be constructed, what encoder configurations will be used, and
individual algorithm parameters that can drastically affect how a model
operates. The model parameters we&#8217;re using in this Quick Start
<a class="reference external" href="example-model-params.html">can be found here</a>.</p>
<p>To use model parameters, they can be written to a file and imported into
your script. In this example, our model parameters existing in a
<a class="reference external" href="http://yaml.org/">YAML</a> file called <code class="docutils literal"><span class="pre">params.yaml</span></code> and are identical to
those <a class="reference external" href="example-model-params.html">linked above</a>.</p>
</div>
<div class="section" id="create-an-opf-model">
<h2>Create an OPF Model<a class="headerlink" href="#create-an-opf-model" title="Permalink to this headline">¶</a></h2>
<p>The easiest way to create a model once you have access to model parameters is by
using the <a class="reference internal" href="../api/opf/models.html#nupic.frameworks.opf.model_factory.ModelFactory" title="nupic.frameworks.opf.model_factory.ModelFactory"><code class="xref py py-class docutils literal"><span class="pre">ModelFactory</span></code></a>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">yaml</span>
<span class="kn">from</span> <span class="nn">nupic.frameworks.opf.model_factory</span> <span class="k">import</span> <span class="n">ModelFactory</span>

<span class="n">_PARAMS_PATH</span> <span class="o">=</span> <span class="s2">&quot;/path/to/model.yaml&quot;</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">_PARAMS_PATH</span><span class="p">,</span> <span class="s2">&quot;r&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
  <span class="n">modelParams</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">safe_load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">model</span> <span class="o">=</span> <span class="n">ModelFactory</span><span class="o">.</span><span class="n">create</span><span class="p">(</span><span class="n">modelParams</span><span class="o">.</span><span class="n">MODEL_PARAMS</span><span class="p">)</span>

<span class="c1"># This tells the model the field to predict.</span>
<span class="n">model</span><span class="o">.</span><span class="n">enableInference</span><span class="p">({</span><span class="s1">&#39;predictedField&#39;</span><span class="p">:</span> <span class="s1">&#39;consumption&#39;</span><span class="p">})</span>
</pre></div>
</div>
<p>The resulting <code class="docutils literal"><span class="pre">model</span></code> will be an instance of <a class="reference internal" href="../api/opf/models.html#nupic.frameworks.opf.htm_prediction_model.HTMPredictionModel" title="nupic.frameworks.opf.htm_prediction_model.HTMPredictionModel"><code class="xref py py-class docutils literal"><span class="pre">HTMPredictionModel</span></code></a>.</p>
</div>
<div class="section" id="feed-the-model-data">
<h2>Feed the Model Data<a class="headerlink" href="#feed-the-model-data" title="Permalink to this headline">¶</a></h2>
<p>The raw input data file is described <a class="reference external" href="example-data.html">here</a> in detail.</p>
<p>Our <a class="reference external" href="example-model-params.html">model parameters</a> define how this data will be
encoded in the <code class="docutils literal"><span class="pre">encoders</span></code> section:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="c1"># List of encoders and their parameters.</span>
<span class="n">encoders</span><span class="p">:</span>
  <span class="n">consumption</span><span class="p">:</span>
    <span class="n">fieldname</span><span class="p">:</span> <span class="n">consumption</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">consumption</span>
    <span class="n">resolution</span><span class="p">:</span> <span class="mf">0.88</span>
    <span class="n">seed</span><span class="p">:</span> <span class="mi">1</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">RandomDistributedScalarEncoder</span>
  <span class="n">timestamp_timeOfDay</span><span class="p">:</span>
    <span class="n">fieldname</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">timestamp_timeOfDay</span>
    <span class="n">timeOfDay</span><span class="p">:</span> <span class="p">[</span><span class="mi">21</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">DateEncoder</span>
  <span class="n">timestamp_weekend</span><span class="p">:</span>
    <span class="n">fieldname</span><span class="p">:</span> <span class="n">timestamp</span>
    <span class="n">name</span><span class="p">:</span> <span class="n">timestamp_weekend</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">DateEncoder</span>
    <span class="n">weekend</span><span class="p">:</span> <span class="mi">21</span>
</pre></div>
</div>
<p>Notice that three semantic values are being encoded into the input space. The
first is the scalar energy <code class="docutils literal"><span class="pre">consumption</span></code> value, which is being encoded with
the <a class="reference internal" href="../api/algorithms/encoders.html#nupic.encoders.random_distributed_scalar.RandomDistributedScalarEncoder" title="nupic.encoders.random_distributed_scalar.RandomDistributedScalarEncoder"><code class="xref py py-class docutils literal"><span class="pre">RandomDistributedScalarEncoder</span></code></a>. The next two values represent two
different aspects of time using the <a class="reference internal" href="../api/algorithms/encoders.html#nupic.encoders.date.DateEncoder" title="nupic.encoders.date.DateEncoder"><code class="xref py py-class docutils literal"><span class="pre">DateEncoder</span></code></a>. The encoder called
<code class="docutils literal"><span class="pre">timestamp_timeOfDay</span></code> encodes the time of day, while the <code class="docutils literal"><span class="pre">timestamp_weekend</span></code>
encoder will output different representations for weekends vs weekdays. The
<a class="reference internal" href="../api/opf/models.html#nupic.frameworks.opf.htm_prediction_model.HTMPredictionModel" title="nupic.frameworks.opf.htm_prediction_model.HTMPredictionModel"><code class="xref py py-class docutils literal"><span class="pre">HTMPredictionModel</span></code></a> will combine these encodings using the
<a class="reference internal" href="../api/algorithms/encoders.html#nupic.encoders.multi.MultiEncoder" title="nupic.encoders.multi.MultiEncoder"><code class="xref py py-class docutils literal"><span class="pre">MultiEncoder</span></code></a>.</p>
<blockquote>
<div>For details about encoding and how these encoders work, see the
<a class="reference external" href="https://numenta.org/htm-school/">HTM School</a> episodes on encoders.</div></blockquote>
<p>Now that you see the raw input data and how it is configured to be encoded into
binary arrays for the HTM to process it, let&#8217;s see the code that actually reads
the CSV data file and runs it through our <code class="docutils literal"><span class="pre">model</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">csv</span>
<span class="kn">import</span> <span class="nn">datetime</span>

<span class="c1"># Open the file to loop over each row</span>
<span class="k">with</span> <span class="nb">open</span> <span class="p">(</span><span class="s2">&quot;gymdata.csv&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">fileIn</span><span class="p">:</span>
  <span class="n">reader</span> <span class="o">=</span> <span class="n">csv</span><span class="o">.</span><span class="n">reader</span><span class="p">(</span><span class="n">fileIn</span><span class="p">)</span>
  <span class="c1"># The first three rows are not data, but we&#39;ll need the field names when</span>
  <span class="c1"># passing data into the model.</span>
  <span class="n">headers</span> <span class="o">=</span> <span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
  <span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>
  <span class="n">reader</span><span class="o">.</span><span class="n">next</span><span class="p">()</span>

  <span class="k">for</span> <span class="n">record</span> <span class="ow">in</span> <span class="n">reader</span><span class="p">:</span>
    <span class="c1"># Create a dictionary with field names as keys, row values as values.</span>
    <span class="n">modelInput</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="nb">zip</span><span class="p">(</span><span class="n">headers</span><span class="p">,</span> <span class="n">record</span><span class="p">))</span>
    <span class="c1"># Convert string consumption to float value.</span>
    <span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;consumption&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="nb">float</span><span class="p">(</span><span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;consumption&quot;</span><span class="p">])</span>
    <span class="c1"># Convert timestamp string to Python datetime.</span>
    <span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">datetime</span><span class="o">.</span><span class="n">datetime</span><span class="o">.</span><span class="n">strptime</span><span class="p">(</span>
      <span class="n">modelInput</span><span class="p">[</span><span class="s2">&quot;timestamp&quot;</span><span class="p">],</span> <span class="s2">&quot;%m/</span><span class="si">%d</span><span class="s2">/%y %H:%M&quot;</span>
    <span class="p">)</span>
    <span class="c1"># Push the data into the model and get back results.</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">modelInput</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="extract-the-results">
<h2>Extract the results<a class="headerlink" href="#extract-the-results" title="Permalink to this headline">¶</a></h2>
<p>In the classifier configuration of our <a class="reference external" href="example-model-params.html">model parameters</a>,
identified as <code class="docutils literal"><span class="pre">modelParams.clParams</span></code>, the <code class="docutils literal"><span class="pre">steps</span></code> value tells the model how
many steps into the future to predict. In this case, we are predicting both one
and five steps into the future as shown by the value <code class="docutils literal"><span class="pre">1,5</span></code>.</p>
<p>This means the <code class="docutils literal"><span class="pre">results</span></code> object will have prediction information keyed by both
<code class="docutils literal"><span class="pre">1</span></code> and <code class="docutils literal"><span class="pre">5</span></code>.</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">result</span> <span class="o">=</span> <span class="n">model</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">modelInput</span><span class="p">)</span>
<span class="n">bestPredictions</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">inferences</span><span class="p">[</span><span class="s1">&#39;multiStepBestPredictions&#39;</span><span class="p">]</span>
<span class="n">allPredictions</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="n">inferences</span><span class="p">[</span><span class="s1">&#39;multiStepPredictions&#39;</span><span class="p">]</span>
<span class="n">oneStep</span> <span class="o">=</span> <span class="n">bestPredictions</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="n">fiveStep</span> <span class="o">=</span> <span class="n">bestPredictions</span><span class="p">[</span><span class="mi">5</span><span class="p">]</span>
<span class="c1"># Confidence values are keyed by prediction value in multiStepPredictions.</span>
<span class="n">oneStepConfidence</span> <span class="o">=</span> <span class="n">allPredictions</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="n">oneStep</span><span class="p">]</span>
<span class="n">fiveStepConfidence</span> <span class="o">=</span> <span class="n">allPredictions</span><span class="p">[</span><span class="mi">5</span><span class="p">][</span><span class="n">fiveStep</span><span class="p">]</span>

<span class="n">result</span> <span class="o">=</span> <span class="p">(</span><span class="n">oneStep</span><span class="p">,</span> <span class="n">oneStepConfidence</span> <span class="o">*</span> <span class="mi">100</span><span class="p">,</span>
          <span class="n">fiveStep</span><span class="p">,</span> <span class="n">fiveStepConfidence</span> <span class="o">*</span> <span class="mi">100</span><span class="p">)</span>
<span class="nb">print</span> <span class="s2">&quot;1-step: </span><span class="si">{:16}</span><span class="s2"> (</span><span class="si">{:4.4}</span><span class="s2">%)</span><span class="se">\t</span><span class="s2"> 5-step: </span><span class="si">{:16}</span><span class="s2"> (</span><span class="si">{:4.4}</span><span class="s2">%)&quot;</span><span class="o">.</span><span class="n">format</span><span class="p">(</span><span class="o">*</span><span class="n">result</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see in the example above, the <code class="docutils literal"><span class="pre">results</span></code> object contains an
<code class="docutils literal"><span class="pre">inferences</span></code> property that contains all the information about predictions.
This includes the following keys:</p>
<ul class="simple">
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">multiStepBestPredictions</span></code>: Contains information about the <em>best</em> prediction</dt>
<dd>that was returned for the last row of data.</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><code class="docutils literal"><span class="pre">multiStepPredictions</span></code>: Contains information about <em>all</em> predictions for the</dt>
<dd>last row of data, including confidence values for each prediction.</dd>
</dl>
</li>
</ul>
<p>Each of these dictionaries should have a key corresponding to the <em>steps ahead</em>
for each prediction. In this example, we are retrieving predictions for both
<code class="docutils literal"><span class="pre">1</span></code> and <code class="docutils literal"><span class="pre">5</span></code> steps ahead (which was defined in the <a class="reference external" href="example-model-params.html">Model Parameters</a>).</p>
<p>In order to get both the best prediction as well as the confidence in the
prediction, we need to find the value for the best prediction from the
<code class="docutils literal"><span class="pre">multiStepBestPredictions</span></code> structure, then use it to find the confidence in
the <code class="docutils literal"><span class="pre">multiStepPredictions</span></code> (for both <code class="docutils literal"><span class="pre">1</span></code> and <code class="docutils literal"><span class="pre">5</span></code> step predictions).</p>
<p>When this example program is run, you can see both predictions and their
confidences in the console output, which should look something like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="mi">1</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">35.7</span> <span class="p">(</span><span class="mf">65.53</span><span class="o">%</span><span class="p">)</span>   <span class="mi">5</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">35.7</span> <span class="p">(</span><span class="mf">99.82</span><span class="o">%</span><span class="p">)</span>
<span class="mi">1</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">38.9</span> <span class="p">(</span><span class="mf">65.73</span><span class="o">%</span><span class="p">)</span>   <span class="mi">5</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">23.5</span> <span class="p">(</span><span class="mf">99.82</span><span class="o">%</span><span class="p">)</span>
<span class="mi">1</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">36.6</span> <span class="p">(</span><span class="mf">99.11</span><span class="o">%</span><span class="p">)</span>   <span class="mi">5</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">35.7</span> <span class="p">(</span><span class="mf">99.81</span><span class="o">%</span><span class="p">)</span>
<span class="mi">1</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">38.9</span> <span class="p">(</span><span class="mf">85.73</span><span class="o">%</span><span class="p">)</span>   <span class="mi">5</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">36.6</span> <span class="p">(</span><span class="mf">99.96</span><span class="o">%</span><span class="p">)</span>
<span class="mi">1</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">38.2</span> <span class="p">(</span><span class="mf">89.59</span><span class="o">%</span><span class="p">)</span>   <span class="mi">5</span><span class="o">-</span><span class="n">step</span><span class="p">:</span>             <span class="mf">38.2</span> <span class="p">(</span><span class="mf">92.61</span><span class="o">%</span><span class="p">)</span>
</pre></div>
</div>
<p><strong>Congratulations! You&#8217;ve got HTM predictions for a scalar data stream!</strong></p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../_static/numenta-logo.png" alt="Logo"/>
            </a></p>
<h1 class="logo"><a href="../index.html">NuPIC</a></h1>






<p>
<iframe src="https://ghbtns.com/github-btn.html?user=numenta&repo=nupic&type=watch&count=true&size=large&v=2"
  allowtransparency="true" frameborder="0" scrolling="0" width="200px" height="35px"></iframe>
</p>





<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Quick Start</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="index.html#install-nupic">Install NuPIC</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="index.html#choose-your-api">Choose Your API</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Online Prediction Framework (OPF)</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#model-parameters">Model Parameters</a></li>
<li class="toctree-l4"><a class="reference internal" href="#create-an-opf-model">Create an OPF Model</a></li>
<li class="toctree-l4"><a class="reference internal" href="#feed-the-model-data">Feed the Model Data</a></li>
<li class="toctree-l4"><a class="reference internal" href="#extract-the-results">Extract the results</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="network.html">Network API</a></li>
<li class="toctree-l3"><a class="reference internal" href="algorithms.html">Algorithms API</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../guides/index.html">Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../api/index.html">API Docs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../contributing/index.html">Contributing</a></li>
</ul>


<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2017, Numenta.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.5.3</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.10</a>
      
      |
      <a href="../_sources/quick-start/opf.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    
    <a href="https://github.com/numenta/nupic" class="github">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://s3.amazonaws.com/github/ribbons/forkme_right_darkblue_121621.png" alt="Fork me on GitHub"  class="github"/>
    </a>
    

    
  </body>
</html>